<?php
// Title de la page
$page_name = 'Visitez ma galerie';
// Inclusion du header
require_once('views/page_top.php');
// Inclusion des fonctions php
require_once('common/functions.php');
?>

<body id="top">
    <!-- Page de la galerie -->

    <main class="row">
        <section class="col-12 col-m-12 col-s-12">
        <div class="titre_main">
            <h2>La galerie</h2>
        </div>

        <section class="col-12 col-m-12 col-s-12">
            <nav>
                <ul id="categories_artworks">
                    <?php ?>
                </ul>
            </nav>
            <div class="content">
                <div class="grid">
                    <!-- Photo 1 -->
                    <div class="grid__item" data-size="640x960">
                        <a href="images/original/1.jpg" class="img-wrap">
                            <img src="images/thumbs/1.jpg" alt=""/>
                            <div class="description description--grid">
                                <h3>Titre de l'oeuvre</h3>
                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad assumenda cupiditate
                                    deleniti expedita illo nam neque odit, rerum saepe sit? Architecto aspernatur
                                    commodi cupiditate dolorem est molestias neque, possimus quae.</p>
                                <p><em>Christine Ngoy</em></p>
                            </div>
                        </a>
                    </div>
                    <!-- Photo 2 -->
                    <div class="grid__item" data-size="640x960">
                        <a href="images/original/2.jpg" class="img-wrap">
                            <img src="images/thumbs/2.jpg" alt=""/>
                            <div class="description description--grid">
                                <h3>Titre de l'oeuvre</h3>
                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad assumenda cupiditate
                                    deleniti expedita illo nam neque odit, rerum saepe sit? Architecto aspernatur
                                    commodi cupiditate dolorem est molestias neque, possimus quae.</p>
                                <p><em>Christine Ngoy</em></p>
                            </div>
                        </a>
                    </div>
                    <!-- Photo 3 -->
                    <div class="grid__item" data-size="640x960">
                        <a href="images/original/3.jpg" class="img-wrap">
                            <img src="images/thumbs/3.jpg" alt=""/>
                            <div class="description description--grid">
                                <h3>Titre de l'oeuvre</h3>
                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad assumenda cupiditate
                                    deleniti expedita illo nam neque odit, rerum saepe sit? Architecto aspernatur
                                    commodi cupiditate dolorem est molestias neque, possimus quae.</p>
                                <p><em>Christine Ngoy</em></p>
                            </div>
                        </a>
                    </div>
                    <!-- Photo 4 -->
                    <div class="grid__item" data-size="640x960">
                        <a href="images/original/4.jpg" class="img-wrap">
                            <img src="images/thumbs/4.jpg" alt=""/>
                            <div class="description description--grid">
                                <h3>Titre de l'oeuvre</h3>
                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad assumenda cupiditate
                                    deleniti expedita illo nam neque odit, rerum saepe sit? Architecto aspernatur
                                    commodi cupiditate dolorem est molestias neque, possimus quae.</p>
                                <p><em>Christine Ngoy</em></p>
                            </div>
                        </a>
                    </div>
                    <!-- Photo 5 -->
                    <div class="grid__item" data-size="960x640">
                        <a href="images/original/5.jpg" class="img-wrap">
                            <img src="images/thumbs/5.jpg" alt=""/>
                            <div class="description description--grid">
                                <h3>Titre de l'oeuvre</h3>
                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad assumenda cupiditate
                                    deleniti expedita illo nam neque odit, rerum saepe sit? Architecto aspernatur
                                    commodi cupiditate dolorem est molestias neque, possimus quae.</p>
                                <p><em>Christine Ngoy</em></p>
                            </div>
                        </a>
                    </div>
                    <!-- Photo 6 -->
                    <div class="grid__item" data-size="960x640">
                        <a href="images/original/6.jpg" class="img-wrap">
                            <img src="images/thumbs/6.jpg" alt=""/>
                            <div class="description description--grid">
                                <h3>Titre de l'oeuvre</h3>
                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad assumenda cupiditate
                                    deleniti expedita illo nam neque odit, rerum saepe sit? Architecto aspernatur
                                    commodi cupiditate dolorem est molestias neque, possimus quae.</p>
                                <p><em>Christine Ngoy</em></p>
                            </div>
                        </a>
                    </div>
                    <!-- Photo 7 -->
                    <div class="grid__item" data-size="960x640">
                        <a href="images/original/7.jpg" class="img-wrap">
                            <img src="images/thumbs/7.jpg" alt=""/>
                            <div class="description description--grid">
                                <h3>Titre de l'oeuvre</h3>
                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad assumenda cupiditate
                                    deleniti expedita illo nam neque odit, rerum saepe sit? Architecto aspernatur
                                    commodi cupiditate dolorem est molestias neque, possimus quae.</p>
                                <p><em>Christine Ngoy</em></p>
                            </div>
                        </a>
                    </div>
                    <!-- Photo 8 -->
                    <div class="grid__item" data-size="960x640">
                        <a href="images/original/8.jpg" class="img-wrap">
                            <img src="images/thumbs/8.jpg" alt=""/>
                            <div class="description description--grid">
                                <h3>Titre de l'oeuvre</h3>
                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad assumenda cupiditate
                                    deleniti expedita illo nam neque odit, rerum saepe sit? Architecto aspernatur
                                    commodi cupiditate dolorem est molestias neque, possimus quae.</p>
                                <p><em>Christine Ngoy</em></p>
                            </div>
                        </a>
                    </div>
                    <!-- Photo 9 -->
                    <div class="grid__item" data-size="640x960">
                        <a href="images/original/9.jpg" class="img-wrap">
                            <img src="images/thumbs/9.jpg" alt=""/>
                            <div class="description description--grid">
                                <h3>Titre de l'oeuvre</h3>
                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad assumenda cupiditate
                                    deleniti expedita illo nam neque odit, rerum saepe sit? Architecto aspernatur
                                    commodi cupiditate dolorem est molestias neque, possimus quae.</p>
                                <p><em>Christine Ngoy</em></p>
                            </div>
                        </a>
                    </div>
                    <!-- Photo 10 -->
                    <div class="grid__item" data-size="640x960">
                        <a href="images/original/10.jpg" class="img-wrap">
                            <img src="images/thumbs/10.jpg" alt=""/>
                            <div class="description description--grid">
                                <h3>Titre de l'oeuvre</h3>
                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad assumenda cupiditate
                                    deleniti expedita illo nam neque odit, rerum saepe sit? Architecto aspernatur
                                    commodi cupiditate dolorem est molestias neque, possimus quae.</p>
                                <p><em>Christine Ngoy</em></p>
                            </div>
                        </a>
                    </div>
                    <!-- Photo 11 -->
                    <div class="grid__item" data-size="960x640">
                        <a href="images/original/11.jpg" class="img-wrap">
                            <img src="images/thumbs/11.jpg" alt=""/>
                            <div class="description description--grid">
                                <h3>Titre de l'oeuvre</h3>
                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad assumenda cupiditate
                                    deleniti expedita illo nam neque odit, rerum saepe sit? Architecto aspernatur
                                    commodi cupiditate dolorem est molestias neque, possimus quae.</p>
                                <p><em>Christine Ngoy</em></p>
                            </div>
                        </a>
                    </div>
                    <!-- Photo 12 -->
                    <div class="grid__item" data-size="640x960">
                        <a href="images/original/12.jpg" class="img-wrap">
                            <img src="images/thumbs/12.jpg" alt=""/>
                            <div class="description description--grid">
                                <h3>Titre de l'oeuvre</h3>
                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad assumenda cupiditate
                                    deleniti expedita illo nam neque odit, rerum saepe sit? Architecto aspernatur
                                    commodi cupiditate dolorem est molestias neque, possimus quae.</p>
                                <p><em>Christine Ngoy</em></p>
                            </div>
                        </a>
                    </div>
                </div>
                <!-- /grid -->
                <div class="preview">
                    <button class="action action--close"><i class="fa fa-times" aria-hidden="true"></i><span
                                class="text-hidden">Close</span></button>
                    <div class="description description--preview"></div>
                </div>
                <!-- /preview -->
            </div>
            <!-- /content -->
        </section>
        <!-- /container -->
        </section>
    </main>

    <?php
    // Inclusion des scripts js
    require_once ('views/js_scripts.php');
    // Inclusion du arrow_top
    require_once ('views/arrow.php');
    ?>

    <script>
        /*function display_categories($category_type) {
            $.get("_controller.php", {function: "get_categories", parameters: [$category_type]},
                function (data) { // data vaut result de la fonction sous forme d'array
                    console.log(data);
                    // Pour chaque categorie cat_title dans data, on passe la fonction
                    $.each(data, function (cat_data) {
                        $('#categories_artworks')
                            .append('<li>')
                            .attr('id',cat_data.ID)
                            .text(cat_data.CAT_TITLE);
                    });
                })
        };*/
        function display_categories($category_type) {
            $.get(
                '_controller.php',
                {
                    function: 'category',
                    parameters: [$category_type]
                },
            function (data) {console.log(data);},
            $.each(data, function (cat_data) {
                    $('#categories_artworks')
                        .append('<li>')
                        .attr('id', cat_data.ID)
                        .text(cat_data.CAT_TITLE);
                })
        )};



        /**
         * Fonction Galerie
         */
        (function () {
            var support = {transitions: Modernizr.csstransitions},
                // transition end event name
                transEndEventNames = {
                    'WebkitTransition': 'webkitTransitionEnd',
                    'MozTransition': 'transitionend',
                    'OTransition': 'oTransitionEnd',
                    'msTransition': 'MSTransitionEnd',
                    'transition': 'transitionend'
                },
                transEndEventName = transEndEventNames[Modernizr.prefixed('transition')],
                onEndTransition = function (el, callback) {
                    var onEndCallbackFn = function (ev) {
                        if (support.transitions) {
                            if (ev.target != this) return;
                            this.removeEventListener(transEndEventName, onEndCallbackFn);
                        }
                        if (callback && typeof callback === 'function') {
                            callback.call(this);
                        }
                    };
                    if (support.transitions) {
                        el.addEventListener(transEndEventName, onEndCallbackFn);
                    }
                    else {
                        onEndCallbackFn();
                    }
                };

            new GridFx(document.querySelector('.grid'), {
                imgPosition: {
                    x: -0.5,
                    y: 1
                },
                onOpenItem: function (instance, item) {
                    instance.items.forEach(function (el) {
                        if (item != el) {
                            var delay = Math.floor(Math.random() * 50);
                            el.style.WebkitTransition = 'opacity .5s ' + delay + 'ms cubic-bezier(.7,0,.3,1), -webkit-transform .5s ' + delay + 'ms cubic-bezier(.7,0,.3,1)';
                            el.style.transition = 'opacity .5s ' + delay + 'ms cubic-bezier(.7,0,.3,1), transform .5s ' + delay + 'ms cubic-bezier(.7,0,.3,1)';
                            el.style.WebkitTransform = 'scale3d(0.1,0.1,1)';
                            el.style.transform = 'scale3d(0.1,0.1,1)';
                            el.style.opacity = 0;
                        }
                    });
                },
                onCloseItem: function (instance, item) {
                    instance.items.forEach(function (el) {
                        if (item != el) {
                            el.style.WebkitTransition = 'opacity .4s, -webkit-transform .4s';
                            el.style.transition = 'opacity .4s, transform .4s';
                            el.style.WebkitTransform = 'scale3d(1,1,1)';
                            el.style.transform = 'scale3d(1,1,1)';
                            el.style.opacity = 1;

                            onEndTransition(el, function () {
                                el.style.transition = 'none';
                                el.style.WebkitTransform = 'none';
                            });
                        }
                    });
                }
            });
        })();
    </script>
    </body>

<?php
// Inclusion du footer
require_once('views/footer.php');
?>